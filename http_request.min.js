
// Author: Christian Vallentin <mail@vallentinsource.com>
// Website: http://vallentinsource.com
// Repository: https://github.com/MrVallentin/http_request
//
// Date Created: February 29, 2016
// Last Modified: March 01, 2016

function http_build_query(e){var t=typeof e;if("object"==t){var n="";for(var o in e){var a=e[o],r=typeof a;if(a instanceof Array){var s="";for(var d in a)s.length>0&&(s+="&"),s+=encodeURIComponent(o)+"[]="+encodeURIComponent(String(a[d]));s.length>0&&(n.length>0&&(n+="&"),n+=s)}else if("object"==r){var s="";for(var u in a)s.length>0&&(s+="&"),s+=encodeURIComponent(o)+"["+encodeURIComponent(u)+"]="+encodeURIComponent(String(a[u]));s.length>0&&(n.length>0&&(n+="&"),n+=s)}else n.length>0&&(n+="&"),n+=encodeURIComponent(o)+"="+encodeURIComponent(String(a))}return n}return"string"==t?e:String(e)}function http_request(e){e=e||{},e.method=e.method||"GET",e.data=e.data||"","object"==typeof e.data&&(e.data=http_build_query(e.data),console.log(e.data));var t=new XMLHttpRequest;"withCredentials"in t?t.open(e.method,e.url,!0):"undefined"!=typeof XDomainRequest&&(t=new XDomainRequest,t.open(e.method,e.url)),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.data&&t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.onreadystatechange=function(){t.readyState>3&&(200===t.status?e.success&&e.success(t.responseText,t.status,t.statusText):e.error&&e.error(t.responseText,t.status,t.statusText))},t.send(e.data)}
